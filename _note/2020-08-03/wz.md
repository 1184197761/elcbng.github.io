---
layout: note
title: 第四周学习笔记
author: 吴文展
category: 2020暑假第三周
date: 2020-08-07~09
---

## 学习内容

* Linux的安装和常用命令、shell基础；
* VIM编辑器、磁盘管理和用户管理；
* 网络基础、Linux网络配置、远程登录工具；
* Linux软件安装（rpm包、yum源、源码包）；
* Linux文件权限管理、进程管理。

## 学习记录

* 周一：说实话，网络安全我真的一窍不通，而且不知道有什么学习方向。百度了一天发现有个叫“拼客学院”的网站，站长居然是一位广工的师兄。听了几节课后对网络安全有了个大概的认识，最主要是知道了要先学什么。
* 周二：完全忘记前一天都干了什么，一时头脑不清醒就。。。偷懒了，什么也没学。
* 周三：花了一上午在VMwave、VirtualBox和Hyper-V中做选择，然后选择了VirtualBox（小巧、免费、风险小），然而装系统N次没成功。后来跟着教程换了VM，还是出现类似的情况，也没查出问题所在，一天就这样过去了。
* 周四：看到有网友说是镜像文件的问题，又下载了一遍，还是没解决。然后发现简易安装可以，看来不是资源的问题，而是安装步骤出错了。经过试错发现是/boot设置太小，调大一点之后终于安装成功。。。然后开始网络配置，发现怎么都找不到setup命令工具，安装了名称相关的包结果都没有。后来才知道CentOs8有nmcli工具，而且其实可以通过文件来配置，总算解决了。
* 周五：开始学习Linux，命令很多而且有点杂（语法规则不太统一），感觉学的囫囵吞枣，没记住多少。然后又学习了网络基础知识，了解了一点网络协议和安全的相关知识。
* 周六：开始做网络安全的作业，虽然有前一天的学习，但还是遇到了很多不懂的知识。根据所学知识+不懂就问+自己理解（瞎编），基本还是完成了网络安全方向的作业。
* 周日：学习了Linux权限管理和进程管理（还是有点糊涂）。闲着没事想在Linux装一下服务器软件，不过操作太麻烦找了LAMP一键安装包，结果到现在还没装成功，经常中途卡住半天没响应，明天再搞了。

## 网络安全作业

### 安全相关

#### 密钥和公钥：

    * 密钥：用于对称加密，同一个密钥可以同时用作同一个信息的加密和解密。
    * 私钥：用于非对称加密，根据密码生成（同时生成公钥）。使用公钥加密的信息都可以（只能）用对应私钥来解密。

#### 对称加密和非对称加密的区别：

    1. 加密解密过程不同
        * 对称加密和解密使用同一个密钥，该密钥既可以加密原文，也可以解析密文。
        * 非对称加密采用了两个密钥，一般使用公钥进行加密，使用私钥进行解密。
    2. 加密解密速度不同
        * 对称加密解密中加密方和解密方使用同一个密钥，加密解密的速度比较快，适合数据比较长时的使用。
        * 非对称加密使用一对秘钥，一个用来加密，一个用来解密，速度相对较慢，只适合对少量数据的使用。
    3. 加密算法不同
        * 在非对bai称加密中使用的主要算法有：duRSA、zhiElgamal、背包算法、Rabin、D-H、ECC（椭圆曲线加密算法）等。
        * 在对称加密中使用的主要算法有：DES（Data Encryption Standard）、3DES（Triple DES）、AES（Advanced Encryption Standard）、Blowfish等。
    4. 加密安全性不同
        * 对称加密的通信双方使用相同的秘钥，如果一方的秘钥遭泄露，那么整个通信就会被破解。
        * 非对称加密使用一对秘钥，一个用来加密，一个用来解密。而且公钥是公开的，秘钥是自己保存的，不需要在通信之前先同步秘钥，安全性更好。
    5. 传输安全性不同
        * 对称加密的过程中无法确保密钥被安全传递，密文在传输过程中是可能被第三方截获的，如果密码本也被第三方截获，则传输的密码信息将被第三方破获，安全性相对较低。
        * 非对称加密算法中私钥是基于不同的算法生成不同的随机数，私钥通过一定的加密算法推导出公钥，但公钥无法反推导出私钥，所以安全性较高。

#### 常用的网络数据加密算法：

    1. 对称加密算法
        * DES（Data Encryption Standard）：数据加密标准，速度较快，适用于加密大量数据的场合。
        * 3DES（Triple DES）：基于DES，对一块数据用三个不同的密钥进行三次加密，强度更高。
        * AES（Advanced Encryption Standard）：高级加密标准，是下一代的加密算法标准，速度快，安全级别高；AES是种十分高效的算法，适用于8位的小型单片机或者普通的32位微处理器，并且适合用专门的硬件实现和RFID系统。
    2. 非对称加密算法
        * RSA：由 RSA 公司发明，是一个支持变长密钥的公共密钥算法，需要加密的文件块的长度也是可变的；
        * DSA（Digital Signature Algorithm）：数字签名算法，是一种标准的 DSS（数字签名标准）；
        * ECC（Elliptic Curves Cryptography）：一种基于椭圆曲线数学的公开密钥加密算法，是代替RSA的强有力的竞争者。安全性能高，计算量小，处理速度快，存储空间占用小，密钥占用极小。另外，带宽要求低使ECC在无线网络领域也具有广泛的应用前景。

#### HTTP和HTTPS的区别：

    * HTTP 明文传输，数据都是未加密的，安全性较差，而 HTTPS（SSL+HTTP）数据传输过程是加密、身份认证的，安全性较好。
    * 使用 HTTPS 协议需要到 CA（Certificate Authority，数字证书认证机构）申请证书，一般免费证书较少，因而需要一定费用。
    * HTTP 页面响应速度比 HTTPS 快，主要是因为 HTTP 使用 TCP 三次握手建立连接，客户端和服务器需要交换3个包，而 HTTPS 除了 TCP 的三个包，还要加上 ssl 握手需要的9个包，所以一共是12个包。
    * HTTP 和 HTTPS 使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。
    * HTTPS 其实就是建构在 SSL/TLS 之上的 HTTP 协议，所以比 HTTP 要更耗费服务器资源。

#### HTTPS的工作原理：

    1. 用户通过客户端输入https网址，连接到服务端的443端口；
    2. 服务端通过证书获得公钥和私钥，并向客户端传送公钥；
    3. 客户端验证公钥没问题后生成随机key并通过公钥进行加密；
    4. 客户端传送加密后的key，作为两端之后通信的密码；
    5. 服务端用私钥解密得到key，对通信内容进行对称加密；
    6. 服务端传输加密后的内容，客户端通过key进行解密，反之同理。

### 网络相关

#### OSI七层协议：

    ![OSI七层模型结构](images/note/2020-08-07-22-35-41.png)
    * 数据发送是从上层往下层传递，经过物理层协议传输，然后由下层往上层接收，呈U字型。
    * 上三层（应用层、表示层、会话层）是最贴近用户的，为用户服务；而下四层（传输层、网络层、数据链路层、物理层）是为数据传递提供服务的。如果不涉及数据传输，则不会经过下四层。
    * 物理层数据的单位为~~byte~~ （原文有误）**bit**，数据链路层数据的单位为**帧**，其中保存的最重要的数据就是网卡的mac地址（mac地址负责局域网通信），网络层的数据单位为报文，主要存储ip（ip地址负责外网通信），传输层的数据单位为TPDU（传输协议数据单元）。

#### 七层模型各层作用：

    * 物理层：负责设备之间的比特流的传输，决定物理接口、电气特性等。
    * 数据链路层：成帧、用MAC地址访问媒介，错误检测与修正。
    * 网络层：提供逻辑（ip）地址、选路（选择经过哪些路径传输数据）。
    * 传输层：确定传输协议和端口号，进行传输前的错误检测、流量控制。
        * TCP和UDP：TCP协议传输数据不会丢，而UDP协议传输速度快但有可能丢。
    * 会话层：对应用会话的管理、同步（确定网络数据是否要经过远程会话）。
    * 表示层：数据的表现形式，特定功能的实现如加密、压缩。
    * 应用层：用户接口（为用户提供服务）。

#### OSI协议与TCP/IP协议的对应关系：

    ![两协议的对应关系](images/note/2020-08-08-09-13-50.png)
    * 应用层（应用层、表示层、会话层）：为用户提供所需要的各种服务，例如FTP、Telnet、DNS、SMTP等。
    * 传输层（传输层）：为应用层实体提供端到端的通信功能，保证了数据包的顺序传送及数据的完整性。该层定义了两个主要的协议：传输控制协议（TCP）和用户数据报协议（UDP）。
    * 网际互联层（网络层）：主要解决主机到主机的通信问题。它所包含的协议涉及数据包在整个网络上的逻辑传输。该层有三个主要协议：网际协议（IP），互联网组管理协议（IGMP），互联网控制报文协议（ICMP）。
    * 网络接口层（数据链路层、物理层）：负责监视数据在主机和网络之间的交换。事实上，TCP/IP本身并未定义该层的协议，而由参与互连的各网络使用自己的物理层和数据链路层协议，然后与TCP/IP的网络接入层进行连接。地址解析协议（ARP）工作在此层，即OSI参考模型的数据链路层。
        * 地址解析协议（ARP）：将IP地址翻译成物理地址。

#### 为何传输层中TCP协议是面向连接的？

    * TCP报文格式
        ![TCP报文格式](images/note/2020-08-08-10-19-56.png)
        * seq（序号）：表示发送的数据字节流，确保TCP传输有序，对每个字节编号
        * ack（确认序号）：发送方期待接收的下一序列号，接收成功后的数据字节序列号加 1，只有ACK=1时才有效。
        * ACK：确认序号的标志，ACK=1表示确认号有效，ACK=0表示报文不含确认序号信息
        * SYN：连接请求序号标志，用于建立连接，SYN=1表示请求连接
        * FIN：结束标志，用于释放连接，为1表示关闭本方数据流
    * TCP/IP的三次握手
        ![TCP/IP三次握手图解](images/note/2020-08-08-10-44-56.png)
        * 第一次握手：客户端首先发送一个带有SYN标志的数据包给服务端，表示我要跟你连接。
        * 第二次握手：服务端接收后，回传一个带有SYN/ACK标志的数据包传递确认信息并分配资源，表示我收到了。
        * 第三次握手：客户端收到后，再回传一个带有ACK标志的数据包并分配资源，代表我知道了。
        * 这样TCP连接就建立了（握手成功）。
    * TCP/IP的四次挥手
        ![TCP/IP四次挥手图解](images/note/2020-08-08-10-45-20.png)
        * 第一次挥手：客户端发送一个FIN（中断请求），用来关闭客户端到服务端的数据传送，并进入FIN_WAIT_1状态。
        * 第二次挥手：服务端收到FIN后，发送一个ACK给客户端，表示收到，请对方稍作等待（发送数据），并进入CLOSE_WAIT状态。
        * 第三次挥手：服务端发送一个FIN，用来关闭服务端到客户端的数据传送，并进入LAST_ACK状态。
        * 第四次挥手：客户端收到FIN后，发送一个ACK，进入TIME_WAIT状态（2MSL内无回复后进入CLOSED状态），服务端收到后进入CLOSED状态。
        * 这样TCP连接就断开了（~~分手~~挥手成功）。
    * 连接的交互性和可靠性
        * 在数据的发送过程中，主机A和主机B之间始终有交互。就算其中一方有数据传错了，另一方也会及时回应，保证接收数据的可靠。
        * 综合“三次握手”与“四次挥手”，可以认为**传输层中TCP协议是面向连接的**。
    * 参考链接：
        * [Linux网络基础之TCP/IP四层模型](https://www.imooc.com/video/5215)
        * [详解 TCP 连接的“三次握手”与“四次挥手”](https://baijiahao.baidu.com/s?id=1654225744653405133&wfr=spider&for=pc)
        * [为什么需要三次握手和四次挥手](https://blog.csdn.net/baixiaoshi/article/details/67712853)
        * [TCP-三次握手和四次挥手简单理解](https://www.jianshu.com/p/d3725391af59)
        * [TCP三次握手和四次挥手通俗理解](https://www.cnblogs.com/jainszhang/p/10641728.html)
    
#### 数据封装的过程：（以传输文件为例）

    ![数据封装过程](images/note/2020-08-08-11-32-34.png)
    1. 用户通过FTP服务器上传文件，文件信息转化为字节流数据，传递到应用层；
    2. 应用层判断上传的是一个文件，通过FTP协议传输，并封装上FTP头传递到传输层；
    3. 传输层封装TCP头（记录协议类型、发送和接收端口），将数据转换为数据段，并传递到网络层；
    4. 网络层在IP报头中放上逻辑地址（原IP和目标IP），若两IP不在同一个网关，则将数据段转换为数据包或数据报，传递到数据链路层；
    5. 数据链路层在以太帧头放上物理地址（原MAC和MAC），将数据包或数据报转换为数据帧，通过网卡传送到物理层；
    6. 物理层接收到比特流（物理层不认识数据）后转化为电信号，在网络中传输。
        > [数据段、数据报、数据包、帧的区别与联系](https://segmentfault.com/a/1190000008449308)

#### 数据解封装过程：（以接收文件为例）

    1. 物理层接收到电信号，将其转化为比特流，通过网卡上传到数据链路层。
    2. 数据链路层解析mac地址，若与本机相符则将以太帧头拆掉，上传到网络层。
    3. 网络层解析ip地址，若与本机相符则将IP报头拆掉，上传到传输层。
    4. 传输层解析端口号，若端口服务存在则将TCP报头拆掉，上传到应用层。
    5. 应用层解析协议类型，若为FTP协议则将FTP报头拆掉，上传到FTP服务器。
    6. 目标用户（组织）通过FTP服务器将字节流数据转化为文件，成功接收。
    * 参考链接：
        * [Linux网络基础之TCP/IP四层模型](https://www.imooc.com/video/5215)
        * [两台计算机之间数据封装和解封装过程说明](https://baijiahao.baidu.com/s?id=1621692091133063438&wfr=spider&for=pc)
        * [笔记--数据的封装与解封装过程](https://blog.51cto.com/13963327/2175883)
        * [网卡是物理层设备还是数据链路层设备？](https://zhidao.baidu.com/question/31873754.html)

## 学习体会

* 本来只想学习网络安全方向的知识，但还是顺便学习了一下Linux。以前装Ubuntu只知道玩，现在才知道Linux一般是用来搭载服务器的，连图形界面都不装，我还以为只有远古操作系统才这样呢。
* 虽然这周看起来学了很多新姿势，但是其实有很多内容没有真正理解和掌握，主要还是实践太少，光听也记不住。估计以后还要再来复习一遍。
* 这周没有学习前端的知识，下周得赶紧复习一下（不挖坑了）。
* 其实VM用起来还是比较舒服的，界面也比较好看，就是占用好像有点大（不看资源监视器都不知道）。
* 看了一下隔壁兄弟的作业，感觉跟我学的完全不搭边，都是我看不懂的东西，唉~
